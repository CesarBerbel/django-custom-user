{% load toast_extras %}
{# Accessible toast notifications (top-left). Auto-hide handled by global script. #}
{% if messages %}
<div id="toast-container" aria-live="polite" aria-atomic="true" style="
     position: fixed; top: 12px; left: 12px; z-index: 9999; display: grid; gap: 8px;">
  {% for message in messages %}
    <div class="toast-msg {{ message.tags }}" role="status" style="
         display:flex; align-items:flex-start; gap:8px;
         padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd;
         background: #f7f7f7; color: #111; max-width: 420px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
      <!-- Icon -->
      <span aria-hidden="true" style="line-height:0; display:inline-flex;">
        {% if 'success' in message.tags %}
          <!-- check-circle -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z" stroke="currentColor"/><path d="M8 12.5l2.5 2.5L16 9.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        {% elif 'error' in message.tags %}
          <!-- x-circle -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z" stroke="currentColor"/><path d="M15 9l-6 6M9 9l6 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        {% elif 'warning' in message.tags %}
          <!-- alert-triangle -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z" stroke="currentColor"/><path d="M12 9v4M12 17h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        {% else %}
          <!-- info -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="10" stroke="currentColor"/><path d="M12 16v-4M12 8h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        {% endif %}
      </span>

      <!-- Text -->
      <div>
        <strong class="toast-level" style="margin-right:6px;">
          {{ message.tags|toast_level_label }}
        </strong>
        <span>{{ message }}</span>
      </div>
    </div>
  {% endfor %}
</div>
{% endif %}
