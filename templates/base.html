<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}Config Starter{% endblock %}</title>

  <!-- Global styles -->
  <style>
    :root {
      color-scheme: light dark;
      --bg: #fafafa;
      --fg: #111;
      --border: #ddd;
      --radius: 12px;
      --accent: #2563eb;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #111;
        --fg: #fafafa;
        --border: #333;
      }
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
      margin: 0;
      padding: 2rem;
      display: flex;
      justify-content: center;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    header {
      border-bottom: 1px solid var(--border);
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
    }

    footer {
      border-top: 1px solid var(--border);
      margin-top: 2rem;
      padding-top: 1rem;
      text-align: center;
      font-size: 0.9rem;
      color: #777;
    }

    a {
      color: var(--accent);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
    
    .toast-msg.success { background: #ecfdf5; border-color: #10b98155; }
    .toast-msg.error   { background: #fef2f2; border-color: #ef444455; }
    .toast-msg.warning { background: #fffbeb; border-color: #f59e0b55; }
    .toast-msg.info    { background: #eff6ff; border-color: #3b82f655; }
  </style>
</head>

<body>
  <div class="container">
      <!-- Toast messages container (top-left, auto-hide after 3s) -->
    {% if messages %}
    <div id="toast-container" aria-live="polite" aria-atomic="true" style="
        position: fixed; top: 12px; left: 12px; z-index: 9999;
        display: grid; gap: 8px;">
      {% for message in messages %}
        <div class="toast-msg {{ message.tags }}" role="status" style="
            padding: 10px 12px; border-radius: 8px; border: 1px solid #ddd;
            background: #f7f7f7; color: #111; max-width: 420px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
          <!-- Simple level -> style mapping -->
          {% comment %} <span style="font-weight:600; margin-right:6px;">
            {% if 'success' in message.tags %}Success{% elif 'error' in message.tags %}Error{% elif 'warning' in message.tags %}Warning{% else %}Info{% endif %}:
          </span> {% endcomment %}
          <span>{{ message }}</span>
        </div>
      {% endfor %}
    </div>
    {% endif %}
    <header>
      <h1>{% block header %}Config Starter{% endblock %}</h1>
      <nav style="margin-top:0.5rem;">
        {% if user.is_authenticated %}
          ðŸ‘‹ Hello, {{ user.email }}
          <a href="{% url 'accounts:profile' %}">Profile</a>
          <form method="post" action="{% url 'accounts:logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" style="background:none; border:none; color:#2563eb; cursor:pointer; text-decoration:underline;">
              Logout
            </button>
          </form>
        {% else %}
          <a href="{% url 'accounts:login' %}">Login</a> Â·
          <a href="{% url 'accounts:register' %}">Register</a>
        {% endif %}
      </nav>
    </header>

    <main>
      {% block content %}
      <!-- Page-specific content goes here -->
      {% endblock %}
    </main>

    <footer>
      {% block footer %}
      Â© {{ now|date:"Y" }} Config Starter Â· Powered by Django
      {% endblock %}
    </footer>
  </div>
  <script>
    // Auto-hide toasts after 3 seconds
    (function () {
      const container = document.getElementById("toast-container");
      if (!container) return;
      setTimeout(() => {
        container.style.transition = "opacity 200ms ease";
        container.style.opacity = "0";
        setTimeout(() => container.remove(), 220);
      }, 3000);
    })();
  </script>
</body>
</html>
